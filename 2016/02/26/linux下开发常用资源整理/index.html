<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="efficiency," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="linux下开发常用资源整理
python(初级,进阶,调试,框架)
linux(命令,代码环境优化,shell,vim,tmux)
git下常用命令
服务相关(nginx,redis,mongodb,mysql,docker)
算法相关(寻路,排序,动态规划,DFS,BFS,Dijkstra)
latex,markdown
应用软件中快捷键">
<meta property="og:type" content="article">
<meta property="og:title" content="linux下开发常用资源整理">
<meta property="og:url" content="http://yoursite.com/2016/02/26/linux下开发常用资源整理/index.html">
<meta property="og:site_name" content="Hilaopo">
<meta property="og:description" content="linux下开发常用资源整理
python(初级,进阶,调试,框架)
linux(命令,代码环境优化,shell,vim,tmux)
git下常用命令
服务相关(nginx,redis,mongodb,mysql,docker)
算法相关(寻路,排序,动态规划,DFS,BFS,Dijkstra)
latex,markdown
应用软件中快捷键">
<meta property="og:updated_time" content="2016-07-27T07:09:45.790Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="linux下开发常用资源整理">
<meta name="twitter:description" content="linux下开发常用资源整理
python(初级,进阶,调试,框架)
linux(命令,代码环境优化,shell,vim,tmux)
git下常用命令
服务相关(nginx,redis,mongodb,mysql,docker)
算法相关(寻路,排序,动态规划,DFS,BFS,Dijkstra)
latex,markdown
应用软件中快捷键">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/2016/02/26/linux下开发常用资源整理/"/>

  <title> linux下开发常用资源整理 | Hilaopo </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Hilaopo</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                linux下开发常用资源整理
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-26T10:46:33+08:00" content="2016-02-26">
              2016-02-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/26/linux下开发常用资源整理/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/26/linux下开发常用资源整理/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/02/26/linux下开发常用资源整理/" class="leancloud_visitors" data-flag-title="linux下开发常用资源整理">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <ul>
<li>linux下开发常用资源整理<ul>
<li>python(初级,进阶,调试,框架)</li>
<li>linux(命令,代码环境优化,shell,vim,tmux)</li>
<li>git下常用命令</li>
<li>服务相关(nginx,redis,mongodb,mysql,docker)</li>
<li>算法相关(寻路,排序,动态规划,DFS,BFS,Dijkstra)</li>
<li>latex,markdown</li>
<li>应用软件中快捷键</li>
</ul>
</li>
</ul>
<a id="more"></a>
<hr>
<h1 id="python-初级-进阶-调试-框架"><a href="#python-初级-进阶-调试-框架" class="headerlink" title="python(初级,进阶,调试,框架)"></a>python(初级,进阶,调试,框架)</h1><h2 id="初级"><a href="#初级" class="headerlink" title="初级:"></a>初级:</h2><p>文件读写:<br>f = open(‘f.txt’, ‘w’) # 在当前目录(pwd)下创建f.txt<br>f.write(str(XX).encode(‘utf8’)+’\n’) # 写入中文时编码为utf8或unicode<br>f.close # 关闭后才会显示<br>异常处理:<br>except (ValueError, IndexError) as e:  # 捕获多种错误的正确方式</p>
<p>逻辑判断:<br>any()和all()</p>
<p>闭包:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span>  <span class="title">aoo</span><span class="params">(a, b)</span>:</span></div><div class="line">        c = a</div><div class="line">        <span class="function"><span class="keyword">def</span>  <span class="title">boo</span> <span class="params">(x)</span>:</span></div><div class="line">                x = b + <span class="number">1</span></div><div class="line">                <span class="keyword">return</span> a,b,c,x</div><div class="line">        <span class="keyword">return</span> boo</div></pre></td></tr></table></figure></p>
<p>使用点操作符来访问字典:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">dotdict</span><span class="params">(dict)</span>:</span></div><div class="line">    <span class="string">"""dot.notation access to dictionary attributes"""</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, attr)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.get(attr)</div><div class="line">    __setattr__= dict.__setitem__</div><div class="line">    __delattr__= dict.__delitem__</div><div class="line"></div><div class="line">mydict = &#123;<span class="string">'val'</span>:<span class="string">'it works'</span>&#125;</div><div class="line">mydict = dotdict(mydict)</div><div class="line">mydict.val</div></pre></td></tr></table></figure></p>
<p>正则表达式(RegEx):</p>
<h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶:"></a>进阶:</h2><p>with及contextlib的用法:</p>
<h2 id="调试"><a href="#调试" class="headerlink" title="调试:"></a>调试:</h2><h3 id="调试方法"><a href="#调试方法" class="headerlink" title="调试方法"></a>调试方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ipdb; ipdb.set_trace() <span class="comment"># 添加后会在断点处停下，之后进入交互调试模式</span></div></pre></td></tr></table></figure>
<p>ipython中使用%pdb来自动开启交互调试模式，报错后会停在出错的地方并自动进入调试模式<br>python -m trace –trace xxx.py 使用该命令来获得文件执行时的所有调用</p>
<h3 id="ipython魔法方法"><a href="#ipython魔法方法" class="headerlink" title="ipython魔法方法"></a>ipython魔法方法</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">%cpaste  <span class="comment"># 粘贴整段代码,保持正确缩进</span></div><div class="line"></div><div class="line"><span class="comment"># 代码修改后自动载入</span></div><div class="line">%load_ext autoreload</div><div class="line">%autoreload <span class="number">2</span></div><div class="line"><span class="comment"># 在ipython启动时自动运行</span></div><div class="line"><span class="string">''</span><span class="string">'</span></div><div class="line">先执行</div><div class="line">ipython profile create</div><div class="line">在生成的文件中添加</div><div class="line">c.InteractiveShellApp.exec_lines = []</div><div class="line">c.InteractiveShellApp.exec_lines.append('%load_ext autoreload<span class="string">')</span></div><div class="line">c.InteractiveShellApp.exec_lines.append('%autoreload <span class="number">2</span><span class="string">')</span></div><div class="line">'<span class="string">''</span></div><div class="line"></div><div class="line">%hist  <span class="comment"># 输入历史</span></div><div class="line"></div><div class="line">%timeit  <span class="comment"># 自动循环n次返回时间统计</span></div><div class="line"></div><div class="line">%pdb  <span class="comment"># 打开调试</span></div><div class="line"></div><div class="line">%logstart  <span class="comment"># 开启输入log记录，保存到文件，可以下次恢复（%logstate, %logstop）</span></div><div class="line"></div><div class="line">%pastebin  <span class="comment"># 指定行号上传到gist并返回url，适合分享代码，配合‘%history -n’来使用</span></div><div class="line"></div><div class="line">%run  <span class="comment"># 载入指定脚本</span></div><div class="line"></div><div class="line">%store  <span class="comment"># 存储变量可用于下次调用，或者使用'&gt;'或'&gt;&gt;'来输出到文件</span></div><div class="line"></div><div class="line">flist = !ls -al  <span class="comment"># 将系统输出存为变量，可以通过grep和fields对flist进行过滤</span></div><div class="line"></div><div class="line">foo??  <span class="comment"># 查看函数源码</span></div></pre></td></tr></table></figure>
<h3 id="调试环境"><a href="#调试环境" class="headerlink" title="调试环境:"></a>调试环境:</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">virtualen<span class="variable">v:</span></div><div class="line"><span class="keyword">source</span> ./bin/activate # 启动虚拟环境</div><div class="line">deactivate  # 退出虚拟环境</div><div class="line"></div><div class="line">pip与ipython的匹配:</div><div class="line">python2 安装 <span class="keyword">python</span>-pip</div><div class="line"><span class="keyword">python3</span> 安装 <span class="keyword">python3</span>-pip</div><div class="line">py2 执行 ipython</div><div class="line"><span class="keyword">py3</span> 执行 ipython3</div></pre></td></tr></table></figure>
<hr>
<h1 id="inux-命令-代码环境优化-shell-vim-tmux"><a href="#inux-命令-代码环境优化-shell-vim-tmux" class="headerlink" title="inux(命令,代码环境优化,shell,vim,tmux)"></a>inux(命令,代码环境优化,shell,vim,tmux)</h1><h2 id="linux"><a href="#linux" class="headerlink" title="linux:"></a>linux:</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&amp;,Ctrl-Z,Ctrl-C,jobs,fg,bg,kill 任务管理操作,前后台切换等</div><div class="line">ls, ls-l, less, head, tail, tail -f, ln, ln -s, chmod, chown, du, du -skh *, df, mount 基本文件管理命令</div><div class="line">awk, sed, gred 简单的数据处理</div><div class="line">ipconfig, ifconfig, dig 基本网络管理命令</div><div class="line">lsof, rsyslog 使用</div><div class="line">crontab 定时任务</div><div class="line">xargs</div><div class="line">uname -<span class="selector-tag">a</span></div><div class="line">echo <span class="variable">$PATH</span> 显示环境变量</div><div class="line">atp-get source XX 下载XX的源码</div><div class="line">ln -s 创建符号链接</div><div class="line">ctrl+alt+T 打开终端　ctrl+alt+Q 关闭终端</div><div class="line">ctrl+s 暂停屏幕输出　<span class="selector-tag">q</span> 继续,在大量输出不容易结束时配合ctrl+c</div><div class="line">ctrl+r 在历史命令中搜索</div><div class="line">ctrl+w 删除光标前的最后一个单词</div><div class="line">ctrl+u 在命令行提示符下删除最后一行内容</div><div class="line">ctrl+win+D 显示桌面</div><div class="line">ctrl+page_up/page_down 多标签切换(浏览器和Terminator适用)</div><div class="line">win+<span class="selector-tag">i</span> 在Terminator下会新建命令行窗口</div><div class="line">wc 打印行数,单词数,比特数</div><div class="line">egrep -w <span class="string">'warning|error|critical'</span> /var/log/messages 正则匹配搜索</div><div class="line">grep -<span class="selector-tag">a</span> -B <span class="number">10</span> -A <span class="number">100</span> <span class="string">'XXX'</span> /dev/sda1 &gt; tmp<span class="selector-class">.txt</span> 可用于文件恢复 关键词 存储磁盘 输出范围</div><div class="line">pstree -<span class="selector-tag">p</span> 打印进程树</div><div class="line">kill -- -pid 杀掉整个进程树</div><div class="line">/etc/passwd 配置了用户的主目录</div><div class="line">/etc/group 用户组配置</div><div class="line">/etc/sudoers 有sudo权限的用户</div><div class="line">/etc/services 包含这台机器提供的服务以及它们的知名端口号的综合列表</div><div class="line">less -N 显示行号</div><div class="line">multitail 同时监控多个文件</div><div class="line">ssh -qTfnN -D <span class="number">7070</span> root@xxx<span class="selector-class">.xxx</span><span class="selector-class">.xxx</span><span class="selector-class">.xxx</span> 与远程主机建立ssh隧道,映射到本机的<span class="number">7070</span>端口</div></pre></td></tr></table></figure>
<h2 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu:"></a>Ubuntu:</h2><figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">显示桌面：ctrl+super+D</div><div class="line">启动快速搜索界面：alt + F2</div><div class="line">快速进入左边栏： alt + F1</div><div class="line">启动Terminal：Ctrl+Alt+T</div><div class="line"></div><div class="line">Ctrl+Super快捷键：</div><div class="line">Ctrl+Super+Up 键：最大化当前窗口</div><div class="line">Ctrl+Super+Down键：最小化当前窗口</div><div class="line">Ctrl+Super+D：最小化所有窗口</div><div class="line">Ctrl+Super+<span class="attribute">Left</span>：半最大化当前窗口（左边）</div><div class="line">Ctrl+Super+<span class="attribute">Right</span>：半最大化当前窗口（右边）</div><div class="line"></div><div class="line">Alt+F7 –移动当前窗口（可以使用键盘或鼠标移动）</div></pre></td></tr></table></figure>
<h2 id="sublime"><a href="#sublime" class="headerlink" title="sublime:"></a>sublime:</h2><figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">分屏 alt + shift + 数字键</div><div class="line"><span class="symbol">alt</span>+<span class="built_in">F3</span> 全选同一字段</div></pre></td></tr></table></figure>
<h2 id="tmux"><a href="#tmux" class="headerlink" title="tmux:"></a>tmux:</h2><figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">tmux att 接入上次session</div><div class="line">c-b + [ 查看历史输出</div><div class="line">c-b + d 将当前session转入后台运行</div><div class="line">c-b + s 切换session</div><div class="line">ctrl+d 关闭某一session</div><div class="line">c-b + ? 查看使用帮助</div><div class="line">C-b + % 横向分Terminal</div><div class="line">C-b + <span class="string">" 纵向分Terminal</span></div><div class="line">C-b + $ 重命名当前的会话</div></pre></td></tr></table></figure>
<h2 id="vim"><a href="#vim" class="headerlink" title="vim:"></a>vim:</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">1,10d 删除1-10行</div><div class="line">10== 重复10次上一操作</div><div class="line">cw 替换从光标所在位置到后一个单词结尾的字符</div><div class="line">:saveas 另存为</div><div class="line">:e 打开文件</div><div class="line">:saveas 另存为</div><div class="line"><span class="meta">:bn 和 :bp</span> 和 :n 上一个和下一个文件</div><div class="line">大写U可撤销一行内的所有改动</div><div class="line">0 移动到行首</div><div class="line">$ 移动到行尾</div><div class="line">% 匹配括号移动，包括 (, &#123;, [.</div><div class="line"><span class="bullet">* </span>和 # 匹配光标当前所在的单词，移动光标到下一个（或上一个）匹配单词（<span class="strong">*是下一个，#是上一个）</span></div><div class="line">ctrl+G 显示文件名和当前编辑的行号</div><div class="line">ctrl+R redo</div><div class="line">ctrl+P 自动补全功能</div><div class="line">注释和取消注释多行文本</div><div class="line">/ 从当前位置向后查找    ? 从当前位置向前查找    n/N 顺向/逆向下一个</div><div class="line"></div><div class="line"></div><div class="line">vimdiff</div><div class="line">]c 下一个diff点</div><div class="line">[c 上一个diff点</div><div class="line">n]c 下n个diff点</div><div class="line">dp 把当前文件的差异复制到另一文件中</div><div class="line">do 把另一文件差异复制到当前文件</div><div class="line">zo 打开折叠代码</div><div class="line">zc 折叠代码</div><div class="line">ctrl+r/w 两文件来回切换</div></pre></td></tr></table></figure>
<hr>
<h1 id="git下常用命令"><a href="#git下常用命令" class="headerlink" title="git下常用命令"></a>git下常用命令</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">reset</span> <span class="comment">--hard HEAD^</span></div><div class="line">git <span class="keyword">reset</span> <span class="comment">--hard (commit id)</span></div><div class="line">git <span class="keyword">show</span> <span class="keyword">HEAD</span></div><div class="line">git remote -v</div><div class="line">git remote <span class="keyword">add</span> origin XX</div><div class="line">git remote <span class="keyword">show</span> (remote) 获得远程分支的更多信息</div><div class="line">git branch -d</div><div class="line">git branch -r</div><div class="line">git branch <span class="comment">--set-upstream loc-branch-name origin/branch-name</span></div><div class="line">git branch -m origain_name new_name 重命名分支</div><div class="line">git stash <span class="keyword">apply</span> stash@&#123;<span class="number">0</span>&#125;</div><div class="line">git <span class="keyword">fetch</span> 更新远程仓库或者抓取远程仓库的子集</div><div class="line">git checkout <span class="comment">--track origin/XX 使用fetch先更新线上子集,然后再创建分支</span></div><div class="line">git tag v1<span class="number">.0</span></div><div class="line">git config <span class="comment">--global alias.xx 'xxx'</span></div><div class="line">git <span class="keyword">merge</span> <span class="comment">--no-commit --squash XX</span></div><div class="line">git diff <span class="keyword">HEAD</span> <span class="keyword">HEAD</span>~n</div><div class="line">git ci <span class="comment">--amend 追加到上一条</span></div><div class="line">git diff <span class="comment">--staged 查看已暂存和上次提交之间的差异</span></div><div class="line">tar cJf.tar.xz/ <span class="comment">--exclude-vcs 将项目打成tar包并排除.git目录</span></div><div class="line">git blame 查找修改者(每一行都有标记)</div><div class="line">git <span class="keyword">commit</span> <span class="comment">--amend -m "XXX"  修改最后一次提交的信息和修改</span></div><div class="line">git push remote branch <span class="comment">--force 强制更改远程提交,配合上一条使用</span></div><div class="line">git <span class="keyword">clone</span> 不支持断点续传 可以init个新项目然后使用git <span class="keyword">fetch</span> <span class="comment">--depth=1下个最后两次更新版本,然后再使用git fetch --unshallow更新</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="服务相关-nginx-redis-mongodb-mysql-docker"><a href="#服务相关-nginx-redis-mongodb-mysql-docker" class="headerlink" title="服务相关(nginx,redis,mongodb,mysql,docker)"></a>服务相关(nginx,redis,mongodb,mysql,docker)</h1><hr>
<h1 id="算法相关-寻路-排序-动态规划-DFS-BFS-Dijkstra"><a href="#算法相关-寻路-排序-动态规划-DFS-BFS-Dijkstra" class="headerlink" title="算法相关(寻路,排序,动态规划,DFS,BFS,Dijkstra)"></a>算法相关(寻路,排序,动态规划,DFS,BFS,Dijkstra)</h1><p>python快排:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">quick_sort</span><span class="params">(lst)</span>:</span></div><div class="line">    <span class="keyword">if</span> len(lst) &lt;= <span class="number">1</span>:</div><div class="line">        <span class="keyword">return</span> lst</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        pivot = lst[<span class="number">0</span>]</div><div class="line">        <span class="keyword">return</span> quick_sort([x <span class="keyword">for</span> x <span class="keyword">in</span> lst[<span class="number">1</span>:] <span class="keyword">if</span> x &lt; pivot]) + [pivot] + quick_sort([y <span class="keyword">for</span> y <span class="keyword">in</span> lst[<span class="number">1</span>:] <span class="keyword">if</span> y &gt;= pivot])</div></pre></td></tr></table></figure></p>
<p>DFS:</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># Definition for a binary tree node.</span></div><div class="line"><span class="meta"># class TreeNode:</span></div><div class="line"><span class="meta">#     def __init__(self, x):</span></div><div class="line"><span class="meta">#         self.val = x</span></div><div class="line"><span class="meta">#         self.left = None</span></div><div class="line"><span class="meta">#         self.right = None</span></div></pre></td></tr></table></figure>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Leetcode上257题Binary Tree Paths的高票答案</span></div><div class="line"><span class="comment"># dfs + stack</span></div><div class="line">def binaryTreePaths1(self, root):</div><div class="line">    if not root:</div><div class="line">        return []</div><div class="line">    res, stack = [], [(root, <span class="string">""</span>)]</div><div class="line">    while stack:</div><div class="line">        <span class="keyword">node</span><span class="title">, ls</span> = stack.pop()</div><div class="line">        if not <span class="keyword">node</span>.<span class="title">left</span> <span class="keyword">and</span> not <span class="keyword">node</span>.right:<span class="title"></span></div><div class="line">            res.append(ls+str(<span class="keyword">node</span>.<span class="title">val</span>))</div><div class="line">        if <span class="keyword">node</span>.right:<span class="title"></span></div><div class="line">            stack.append((<span class="keyword">node</span>.<span class="title">right</span>, ls+str(<span class="keyword">node</span>.<span class="title">val</span>)+<span class="string">"-&gt;"</span>))</div><div class="line">        if <span class="keyword">node</span>.left:<span class="title"></span></div><div class="line">            stack.append((<span class="keyword">node</span>.<span class="title">left</span>, ls+str(<span class="keyword">node</span>.<span class="title">val</span>)+<span class="string">"-&gt;"</span>))</div><div class="line">    return res</div><div class="line"></div><div class="line"><span class="comment"># bfs + queue</span></div><div class="line">def binaryTreePaths2(self, root):</div><div class="line">    if not root:</div><div class="line">        return []</div><div class="line">    res, queue = [], collections.deque([(root, <span class="string">""</span>)])</div><div class="line">    while queue:</div><div class="line">        <span class="keyword">node</span><span class="title">, ls</span> = queue.popleft()</div><div class="line">        if not <span class="keyword">node</span>.<span class="title">left</span> <span class="keyword">and</span> not <span class="keyword">node</span>.right:<span class="title"></span></div><div class="line">            res.append(ls+str(<span class="keyword">node</span>.<span class="title">val</span>))</div><div class="line">        if <span class="keyword">node</span>.left:<span class="title"></span></div><div class="line">            queue.append((<span class="keyword">node</span>.<span class="title">left</span>, ls+str(<span class="keyword">node</span>.<span class="title">val</span>)+<span class="string">"-&gt;"</span>))</div><div class="line">        if <span class="keyword">node</span>.right:<span class="title"></span></div><div class="line">            queue.append((<span class="keyword">node</span>.<span class="title">right</span>, ls+str(<span class="keyword">node</span>.<span class="title">val</span>)+<span class="string">"-&gt;"</span>))</div><div class="line">    return res</div><div class="line"></div><div class="line"><span class="comment"># dfs recursively</span></div><div class="line">def binaryTreePaths(self, root):</div><div class="line">    if not root:</div><div class="line">        return []</div><div class="line">    res = []</div><div class="line">    self.dfs(root, <span class="string">""</span>, res)</div><div class="line">    return res</div><div class="line"></div><div class="line">def dfs(self, root, ls, res):</div><div class="line">    if not root.left <span class="keyword">and</span> not root.right:</div><div class="line">        res.append(ls+str(root.val))</div><div class="line">    if root.left:</div><div class="line">        self.dfs(root.left, ls+str(root.val)+<span class="string">"-&gt;"</span>, res)</div><div class="line">    if root.right:</div><div class="line">        self.dfs(root.right, ls+str(root.val)+<span class="string">"-&gt;"</span>, res)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 易懂答案</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">binaryTreePaths</span><span class="params">(self, root)</span>:</span></div><div class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</div><div class="line">            <span class="keyword">return</span> []　<span class="comment"># 整棵树为空</span></div><div class="line"></div><div class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root.left <span class="keyword">and</span> <span class="keyword">not</span> root.right:</div><div class="line">            <span class="keyword">return</span> [str(root.val)] <span class="comment"># leaf节点</span></div><div class="line"></div><div class="line">        leftPathToLeaf = self.binaryTreePaths(root.left)</div><div class="line">        rightPathToLeaf = self.binaryTreePaths(root.right)</div><div class="line"></div><div class="line">        left = [str(root.val)+ (<span class="string">"-&gt;"</span>+lpath ) <span class="keyword">for</span> lpath <span class="keyword">in</span> leftPathToLeaf]</div><div class="line">        right = [str(root.val)+ (<span class="string">"-&gt;"</span>+rpath) <span class="keyword">for</span> rpath <span class="keyword">in</span> rightPathToLeaf]</div><div class="line">        <span class="keyword">return</span> left+right</div></pre></td></tr></table></figure>
<hr>
<h1 id="latex-markdown"><a href="#latex-markdown" class="headerlink" title="latex,markdown"></a>latex,markdown</h1><hr>
<h1 id="设计模式-部分内容直接从小明明s的blog直接搬过来"><a href="#设计模式-部分内容直接从小明明s的blog直接搬过来" class="headerlink" title="设计模式(部分内容直接从小明明s的blog直接搬过来)"></a>设计模式(部分内容直接从小明明s的blog直接搬过来)</h1><p><strong>1/观察者模式</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 这个是观察者基类</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subject</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self._observers = []</div><div class="line"></div><div class="line">    <span class="comment"># 添加依赖的对象</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">attach</span><span class="params">(self, observer)</span>:</span></div><div class="line">        <span class="keyword">if</span> <span class="keyword">not</span> observer <span class="keyword">in</span> self._observers:</div><div class="line">            self._observers.append(observer)</div><div class="line"></div><div class="line">    <span class="comment"># 取消添加</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">detach</span><span class="params">(self, observer)</span>:</span></div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            self._observers.remove(observer)</div><div class="line">        <span class="keyword">except</span> ValueError:</div><div class="line">            <span class="keyword">pass</span></div><div class="line"></div><div class="line">    <span class="comment"># 这里只是通知上面注册的依赖对象新的变化</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">notify</span><span class="params">(self, modifier=None)</span>:</span></div><div class="line">        <span class="keyword">for</span> observer <span class="keyword">in</span> self._observers:</div><div class="line">            <span class="comment"># 可以设置过滤条件，对不符合过滤条件的更新</span></div><div class="line">            <span class="keyword">if</span> modifier != observer:</div><div class="line">                observer.update(self)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 观察者类</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Data</span><span class="params">(Subject)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name=<span class="string">''</span>)</span>:</span></div><div class="line">        super(Data, self).__init__()</div><div class="line">        self.name = name</div><div class="line">        self._data = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="comment"># python2.6新增的写法,获取属性为property，设置属性为(假设属性名字为x)@x.setter,删除为@x.deleter</span></div><div class="line"><span class="meta">    @property</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">data</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self._data</div><div class="line"></div><div class="line"><span class="meta">    @data.setter</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">data</span><span class="params">(self, value)</span>:</span></div><div class="line">        self._data = value</div><div class="line">        self.notify()</div><div class="line"></div><div class="line"><span class="comment"># 这里有2个被观察者，也就是依赖的对象，每次Data有改变，这2个view都会变动</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HexViewer</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, subject)</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">'HexViewer: Subject %s has data 0x%x'</span> % (subject.name, subject.data)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DecimalViewer</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, subject)</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">'DecimalViewer: Subject %s has data %d'</span> % (subject.name, subject.data)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line"></div><div class="line">    data1 = Data(<span class="string">'Data 1'</span>)</div><div class="line">    data2 = Data(<span class="string">'Data 2'</span>)</div><div class="line">    view1 = DecimalViewer()</div><div class="line">    view2 = HexViewer()</div><div class="line">    data1.attach(view1)</div><div class="line">    data1.attach(view2)</div><div class="line">    data2.attach(view2)</div><div class="line">    data2.attach(view1)</div><div class="line"></div><div class="line">    <span class="keyword">print</span> <span class="string">"Setting Data 1 = 10"</span></div><div class="line">    data1.data = <span class="number">10</span></div><div class="line">    <span class="keyword">print</span> <span class="string">"Setting Data 2 = 15"</span></div><div class="line">    data2.data = <span class="number">15</span></div><div class="line">    <span class="keyword">print</span> <span class="string">"Setting Data 1 = 3"</span></div><div class="line">    data1.data = <span class="number">3</span></div><div class="line">    <span class="keyword">print</span> <span class="string">"Setting Data 2 = 5"</span></div><div class="line">    data2.data = <span class="number">5</span></div><div class="line">    <span class="keyword">print</span> <span class="string">"Update data1's view2 Because view1 is be filtered"</span></div><div class="line">    data1.notify(modifier=view1)</div><div class="line">    <span class="keyword">print</span> <span class="string">"Detach HexViewer from data1 and data2."</span></div><div class="line">    data1.detach(view2)</div><div class="line">    data2.detach(view2)</div><div class="line">    <span class="keyword">print</span> <span class="string">"Setting Data 1 = 10"</span></div><div class="line">    data1.data = <span class="number">10</span></div><div class="line">    <span class="keyword">print</span> <span class="string">"Setting Data 2 = 15"</span></div><div class="line">    data2.data = <span class="number">15</span></div></pre></td></tr></table></figure></p>
<p><strong>2/装饰者模式</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line">        self.name = name</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">"wangwang"</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line">        self.name = name</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">meow</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">"meow"</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AnimalAdapter</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, animal, make_noise)</span>:</span></div><div class="line">        self.animal = animal</div><div class="line">        self.make_noise = make_noise</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, attr)</span>:</span></div><div class="line">        <span class="keyword">return</span> getattr(self.animal, attr)</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    fido = Dog(<span class="string">"Fido"</span>)</div><div class="line">    <span class="comment"># 都是这个适应类帮助你转换，怎么转换是你设计好的，他只是个模式</span></div><div class="line">    canine = AnimalAdapter(fido, fido.bark)</div><div class="line">    whiskers = Cat(<span class="string">"Whiskers"</span>)</div><div class="line">    feline = AnimalAdapter(whiskers, whiskers.meow)</div><div class="line"></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> (canine, feline):</div><div class="line">        <span class="keyword">print</span> i.name, <span class="string">'says:'</span>, i.make_noise()</div></pre></td></tr></table></figure></p>
<p><strong>3/工厂模式</strong><br><strong>4/单件模式</strong><br><strong>5/命令模式</strong><br><strong>6/适配器与外观模式</strong><br><strong>7/模板方法模式</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 整个例子我们要根据不同需求处理的内容</span></div><div class="line">ingredients = <span class="string">"spam eggs apple"</span></div><div class="line">line = <span class="string">'-'</span> * <span class="number">10</span></div><div class="line"></div><div class="line"><span class="comment"># 这是被模板方法调用的基础函数</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">iter_elements</span><span class="params">(getter, action)</span>:</span></div><div class="line">    <span class="string">"""循环处理的骨架"""</span></div><div class="line">    <span class="comment"># getter是要迭代的数据，action是要执行的函数</span></div><div class="line">    <span class="keyword">for</span> element <span class="keyword">in</span> getter():</div><div class="line">        action(element)</div><div class="line">        print(line)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">rev_elements</span><span class="params">(getter, action)</span>:</span></div><div class="line">    <span class="string">"""反向的"""</span></div><div class="line">    <span class="keyword">for</span> element <span class="keyword">in</span> getter()[::<span class="number">-1</span>]:</div><div class="line">        action(element)</div><div class="line">        print(line)</div><div class="line"></div><div class="line"><span class="comment"># 数据经过函数处理就是我们最后传给模板的内容</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_list</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> ingredients.split()</div><div class="line"></div><div class="line"><span class="comment"># 同上</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_lists</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> [list(x) <span class="keyword">for</span> x <span class="keyword">in</span> ingredients.split()]</div><div class="line"></div><div class="line"><span class="comment"># 对数据的操作</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_item</span><span class="params">(item)</span>:</span></div><div class="line">    print(item)</div><div class="line"><span class="comment">#反向处理数据</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">reverse_item</span><span class="params">(item)</span>:</span></div><div class="line">    print(item[::<span class="number">-1</span>])</div><div class="line"></div><div class="line"><span class="comment"># 模板函数</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_template</span><span class="params">(skeleton, getter, action)</span>:</span></div><div class="line">    <span class="comment"># 它抽象的传入了 骨架，数据，和子类的操作函数</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">template</span><span class="params">()</span>:</span></div><div class="line">        skeleton(getter, action)</div><div class="line">    <span class="keyword">return</span> template</div><div class="line"></div><div class="line"><span class="comment"># 列表解析，数据就是前面的2种骨架(定义怎么样迭代)，2个分割数据的函数，正反向打印数据的组合</span></div><div class="line">templates = [make_template(s, g, a)</div><div class="line">            <span class="keyword">for</span> g <span class="keyword">in</span> (get_list, get_lists)</div><div class="line">            <span class="keyword">for</span> a <span class="keyword">in</span> (print_item, reverse_item)</div><div class="line">            <span class="keyword">for</span> s <span class="keyword">in</span> (iter_elements, rev_elements)]</div><div class="line"></div><div class="line"><span class="comment"># 执行</span></div><div class="line"><span class="keyword">for</span> template <span class="keyword">in</span> templates:</div><div class="line">    template()</div></pre></td></tr></table></figure></p>
<p><strong>8/迭代器与组合模式</strong><br><strong>9/状态模式</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetworkCardState</span>:</span></div><div class="line">    <span class="string">"""基类"""</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">send</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">raise</span> NotImplementedError</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">receive</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">raise</span> NotImplementedError</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Online</span><span class="params">(NetworkCardState)</span>:</span></div><div class="line">    <span class="string">"""在线"""</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">send</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"sending Data"</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">receive</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"receiving Data"</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Offline</span><span class="params">(NetworkCardState)</span>:</span></div><div class="line">    <span class="string">"""离线"""</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">send</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"cannot send...Offline"</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">receive</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"cannot receive...Offline"</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetworkCard</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.online = Online()</div><div class="line">        self.offline = Offline()</div><div class="line">        <span class="comment"># 修改内部属性currentState，默认是离线，直接传入类</span></div><div class="line">        self.currentState = self.offline</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">startConnection</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># 修改状态成在线</span></div><div class="line">        self.currentState = self.online</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">stopConnection</span><span class="params">(self)</span>:</span></div><div class="line">        self.currentState = self.offline</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">send</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># 去掉用这个可变的属性的方法，达到看起来是操作了类的属性的改变</span></div><div class="line">        self.currentState.send()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">receive</span><span class="params">(self)</span>:</span></div><div class="line">        self.currentState.receive()</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line">    myNetworkCard = NetworkCard()</div><div class="line">    <span class="keyword">print</span> <span class="string">"without connection:"</span></div><div class="line">    myNetworkCard.send()</div><div class="line">    myNetworkCard.receive()</div><div class="line">    <span class="keyword">print</span> <span class="string">"starting connection"</span></div><div class="line">    myNetworkCard.startConnection()</div><div class="line">    myNetworkCard.send()</div><div class="line">    myNetworkCard.receive()</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    main()</div></pre></td></tr></table></figure></p>
<p><strong>10/代理模式</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Proxy</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, subject)</span>:</span></div><div class="line">        self.__subject = subject</div><div class="line">    <span class="comment"># 代理其实本质上就是属性的委托</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, name)</span>:</span></div><div class="line">        <span class="keyword">return</span> getattr(self.__subject, name)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RGB</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, red, green, blue)</span>:</span></div><div class="line">        self.__red = red</div><div class="line">        self.__green = green</div><div class="line">        self.__blue = blue</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Red</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.__red</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Green</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.__green</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Blue</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.__blue</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">NoBlueProxy</span><span class="params">(Proxy)</span>:</span></div><div class="line">    <span class="comment"># 我在这个子代理类拦截了blue的访问，这样就不会返回被代理的类的Blue属性</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Blue</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="number">0</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    rgb = RGB(<span class="number">100</span>, <span class="number">192</span>, <span class="number">240</span>)</div><div class="line">    <span class="keyword">print</span> rgb.Red()</div><div class="line">    proxy = Proxy(rgb)</div><div class="line">    <span class="keyword">print</span> proxy.Green()</div><div class="line">    noblue = NoBlueProxy(rgb)</div><div class="line">    <span class="keyword">print</span> noblue.Green()</div><div class="line">    <span class="keyword">print</span> noblue.Blue()</div></pre></td></tr></table></figure></p>
<p><strong>11/复合模式</strong><br><strong>12/访问者模式</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 轮子,引擎, 车身这些定义好了都不需要变动</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wheel</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line">        self.name = name</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">accept</span><span class="params">(self, visitor)</span>:</span></div><div class="line">        <span class="comment"># 每个visitor是同样的，但是其中的方法是不一样的，比如这里是visitWheel，</span></div><div class="line">        <span class="comment"># 然后传入了self，想想？他其实想做什么就能做什么</span></div><div class="line">        visitor.visitWheel(self)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Engine</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">accept</span><span class="params">(self, visitor)</span>:</span></div><div class="line">        visitor.visitEngine(self)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Body</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">accept</span><span class="params">(self, visitor)</span>:</span></div><div class="line">        visitor.visitBody(self)</div><div class="line"></div><div class="line"><span class="comment"># 我们要组合成车</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.engine = Engine()</div><div class="line">        self.body   = Body()</div><div class="line">        self.wheels = [ Wheel(<span class="string">"front left"</span>), Wheel(<span class="string">"front right"</span>),</div><div class="line">                        Wheel(<span class="string">"back left"</span>) , Wheel(<span class="string">"back right"</span>) ]</div><div class="line"></div><div class="line">    <span class="comment"># 这个也不需要在动，他只是上面部件的组合，只是做了属性的委托</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">accept</span><span class="params">(self,visitor)</span>:</span></div><div class="line">        visitor.visitCar(self)</div><div class="line">        self.engine.accept(visitor)</div><div class="line">        self.body.accept(visitor)</div><div class="line">        <span class="keyword">for</span> wheel <span class="keyword">in</span> self.wheels:</div><div class="line">            wheel.accept(visitor)</div><div class="line"></div><div class="line"><span class="comment"># 这个才是我们的访问者，每次的修改都在这里面</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PrintVisitor</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">visitWheel</span><span class="params">(self, wheel)</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"Visiting "</span>+wheel.name+<span class="string">" wheel"</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">visitEngine</span><span class="params">(self, engine)</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"Visiting engine"</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">visitBody</span><span class="params">(self, body)</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"Visiting body"</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">visitCar</span><span class="params">(self, car)</span>:</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"Visiting car"</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    car = Car()</div><div class="line">    visitor = PrintVisitor()</div><div class="line">    car.accept(visitor)</div></pre></td></tr></table></figure></p>
<p><strong>13/备忘录模式(表单验证失败时做恢复)</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> copy</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">Memento</span><span class="params">(obj, deep=False)</span>:</span></div><div class="line"></div><div class="line">    <span class="comment"># 对你要做快照的对象做快照</span></div><div class="line">    state = (copy.copy <span class="keyword">if</span> deep <span class="keyword">else</span> copy.deepcopy)(obj.__dict__)</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Restore</span><span class="params">()</span>:</span></div><div class="line">        obj.__dict__ = state</div><div class="line">    <span class="keyword">return</span> Restore</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Transaction</span>:</span></div><div class="line"></div><div class="line">    deep = <span class="keyword">False</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, *targets)</span>:</span></div><div class="line">        self.targets = targets</div><div class="line">        self.Commit()</div><div class="line">    <span class="comment"># 模拟事务提交，其实就是初始化给每个对象往self.targets赋值</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Commit</span><span class="params">(self)</span>:</span></div><div class="line">        self.states = [Memento(target, self.deep) <span class="keyword">for</span> target <span class="keyword">in</span> self.targets]</div><div class="line">    <span class="comment"># 回滚其实就是调用Memento函数，执行其中的闭包，将__dict__恢复</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Rollback</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">for</span> state <span class="keyword">in</span> self.states:</div><div class="line">            state()</div><div class="line"></div><div class="line"><span class="comment"># 装饰器的方式给方法添加这个事务的功能</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">transactional</span><span class="params">(method)</span>:</span></div><div class="line">    <span class="comment"># 这里的self其实就是要保存的那个对象，和类的实例无关</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrappedMethod</span><span class="params">(self, *args, **kwargs)</span>:</span></div><div class="line">        state = Memento(self)</div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            <span class="keyword">return</span> method(self, *args, **kwargs)</div><div class="line">        <span class="keyword">except</span>:</div><div class="line">            <span class="comment"># 和上面的回滚一样，异常就恢复</span></div><div class="line">            state()</div><div class="line">            <span class="keyword">raise</span></div><div class="line">    <span class="keyword">return</span> wrappedMethod</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumObj</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, value)</span>:</span></div><div class="line">        self.value = value</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">'&lt;%s: %r&gt;'</span> % (self.__class__.__name__, self.value)</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Increment</span><span class="params">(self)</span>:</span></div><div class="line">        self.value += <span class="number">1</span></div><div class="line"></div><div class="line"><span class="meta">    @transactional</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">DoStuff</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># 赋值成字符串，再自增长肯定会报错的</span></div><div class="line">        self.value = <span class="string">'1111'</span></div><div class="line">        self.Increment()</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line"></div><div class="line">    n = NumObj(<span class="number">-1</span>)</div><div class="line">    <span class="keyword">print</span> n</div><div class="line">    t = Transaction(n)</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</div><div class="line">            n.Increment()</div><div class="line">            <span class="keyword">print</span> n</div><div class="line">        <span class="comment"># 这里事务提交会保存状态从第一次的-1到2</span></div><div class="line">        t.Commit()</div><div class="line">        <span class="keyword">print</span> <span class="string">'-- commited'</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</div><div class="line">            n.Increment()</div><div class="line">            <span class="keyword">print</span> n</div><div class="line">        n.value += <span class="string">'x'</span> <span class="comment"># will fail</span></div><div class="line">        <span class="keyword">print</span> n</div><div class="line">    <span class="keyword">except</span>:</div><div class="line">        <span class="comment"># 回滚只会回顾到上一次comit成功的2 而不是-1</span></div><div class="line">        t.Rollback()</div><div class="line">        <span class="keyword">print</span> <span class="string">'-- rolled back'</span></div><div class="line">    <span class="keyword">print</span> n</div><div class="line">    <span class="keyword">print</span> <span class="string">'-- now doing stuff ...'</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        n.DoStuff()</div><div class="line">    <span class="keyword">except</span>:</div><div class="line">        <span class="keyword">print</span> <span class="string">'-&gt; doing stuff failed!'</span></div><div class="line">        <span class="keyword">import</span> traceback</div><div class="line">        traceback.print_exc(<span class="number">0</span>)</div><div class="line">        <span class="keyword">pass</span></div><div class="line">    <span class="comment"># 第二次的异常回滚n还是2, 整个过程都是修改NumObj的实例对象</span></div><div class="line">    <span class="keyword">print</span> n</div></pre></td></tr></table></figure></p>
<p><strong>14/策略模式(通过对象组合的方式,让客户可以选择算法实现)</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Duck</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="comment"># 上面使用继承，这里通用的使用参数方式，传入的就是操作工厂的类</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, strategy=None)</span>:</span></div><div class="line">        self.action = <span class="keyword">None</span></div><div class="line">        self.count = <span class="number">0</span></div><div class="line">        <span class="keyword">if</span> strategy:</div><div class="line">            <span class="comment"># 指定策略，那么执行action就是用这个类的实例</span></div><div class="line">            self.action = strategy()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fly</span><span class="params">(self, kind)</span>:</span></div><div class="line">        <span class="keyword">if</span> self.action:</div><div class="line">            self.count += <span class="number">1</span></div><div class="line">            <span class="comment"># 这里的第二个参数self，算是炫技吧，就是为了让操作的方法获得这里计算好的count</span></div><div class="line">            <span class="keyword">return</span> self.action.fly(kind, self)</div><div class="line"></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">raise</span> UnboundLocalError(<span class="string">'Exception raised, no strategyClass supplied to Duck!'</span>)</div><div class="line"></div><div class="line"><span class="comment"># 注意这里没有继承Duck，因为是以参数的方式传入类名</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Duck1</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fly</span><span class="params">(self, kind, instance)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">'Duck1 fly kind: '</span> + kind + <span class="string">'#'</span> + str(instance.count)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Duck2</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fly</span><span class="params">(self, kind, instance)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">'Duck2 fly kind: '</span> + kind + <span class="string">'#'</span> + str(instance.count)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    duckfly = Duck()</div><div class="line">    duck1fly = Duck(strategy=Duck1)</div><div class="line">    duck2fly = Duck(strategy=Duck2)</div><div class="line"></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        <span class="keyword">print</span> duckfly.fly(<span class="string">'yes'</span>)</div><div class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</div><div class="line">        <span class="keyword">print</span> <span class="string">"The following exception was expected:"</span></div><div class="line">        <span class="keyword">print</span> e</div><div class="line"></div><div class="line">    <span class="keyword">print</span> duck1fly.fly(<span class="string">'yes'</span>)</div><div class="line">    <span class="keyword">print</span> duck1fly.fly(<span class="string">'no'</span>)</div><div class="line">    <span class="keyword">print</span> duck1fly.fly(<span class="string">'yes'</span>)</div><div class="line">    <span class="keyword">print</span> duck2fly.fly(<span class="string">'yes'</span>)</div><div class="line">    <span class="keyword">print</span> duck2fly.fly(<span class="string">'no'</span>)</div></pre></td></tr></table></figure></p>
<p><strong>15/对象池模式</strong><br><strong>16/Null模式</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(object)</span>:</span></div><div class="line">    b = <span class="number">1</span></div><div class="line"><span class="meta">    @classmethod</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(cls)</span>:</span></div><div class="line">        <span class="keyword">print</span> cls.b</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Null</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, *args, **kwargs)</span>:</span></div><div class="line">        <span class="string">'''忽略参数'''</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">None</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, *args, **kwargs)</span>:</span></div><div class="line">        <span class="string">'''忽略实例调用'''</span></div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, mname)</span>:</span></div><div class="line">        <span class="string">'''忽略属性获得'''</span></div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setattr__</span><span class="params">(self, name, value)</span>:</span></div><div class="line">        <span class="string">'''忽略设置属性操作'''</span></div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delattr__</span><span class="params">(self, name)</span>:</span></div><div class="line">        <span class="string">'''忽略删除属性操作'''</span></div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">"&lt;Null&gt;"</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">"Null"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_test_with_null</span><span class="params">(x)</span>:</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        <span class="keyword">return</span> x.test</div><div class="line">    <span class="comment"># 异常处理返回Null类</span></div><div class="line">    <span class="keyword">except</span> AttributeError:</div><div class="line">        <span class="keyword">return</span> Null()  <span class="comment"># 这里返回的是一个类!!</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> [A, B]:</div><div class="line">    <span class="comment"># 直接调用了，不需要判断</span></div><div class="line">    get_test_with_null(i)()</div></pre></td></tr></table></figure></p>
<p><strong>17/组合模式</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Trunk</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="string">'''树干'''</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">pass</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">subtree</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">pass</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Composite</span><span class="params">(Trunk)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, left=None, right=None, length=None)</span>:</span></div><div class="line">        self.left=left</div><div class="line">        self.right=right</div><div class="line">        self.length=length</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># 这个结果是在调用subtree()的时候返回</span></div><div class="line">        <span class="keyword">if</span> self.length:</div><div class="line">            <span class="keyword">return</span> <span class="string">"("</span> + self.left.__str__() + <span class="string">", "</span> + self.right.__str__() + <span class="string">")"</span> + <span class="string">": "</span> + str(self.length)</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">return</span> <span class="string">"("</span> + self.left.__str__() + <span class="string">", "</span> + self.right.__str__() + <span class="string">")"</span></div><div class="line"></div><div class="line">    <span class="comment"># 这里其实就是一个技巧，通过这个函数返回下一级的对象，也就是它既是对象还可以是对象的容器</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">subtree</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> Composite(self.left, self.right)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Leaf</span><span class="params">(Trunk)</span>:</span></div><div class="line">    <span class="string">'''叶子类，它没办法继续延伸了'''</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, length=None)</span>:</span></div><div class="line">        self.name = name</div><div class="line">        self.length=length</div><div class="line">        self.left = <span class="keyword">None</span></div><div class="line">        self.right = <span class="keyword">None</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.name + <span class="string">": "</span> + str(self.length)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">subtree</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> Leaf(self.name, self.length)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    <span class="comment"># 只有叶子那么就直接返回__str__的拼装结果</span></div><div class="line">    t1 = Leaf(<span class="string">'A'</span>, <span class="number">0.71399</span>)</div><div class="line">    <span class="keyword">print</span> t1</div><div class="line">    <span class="comment"># 有个2个叶子的组合，返回的是2个叶子的对象的组合</span></div><div class="line">    t2 = Composite(Leaf(<span class="string">'B'</span>, <span class="number">-0.00804</span>),</div><div class="line">        Leaf(<span class="string">'C'</span>, <span class="number">0.07470</span>))</div><div class="line">    <span class="keyword">print</span> t2</div><div class="line">    <span class="comment"># 这个是嵌套的叶子的组合，树干上面有树枝，树枝上面有叶子</span></div><div class="line">    t3 = Composite(Leaf(<span class="string">'A'</span>, <span class="number">0.71399</span>),</div><div class="line">        Composite(Leaf(<span class="string">'B'</span>, <span class="number">-0.00804</span>),</div><div class="line">                Leaf(<span class="string">'C'</span>, <span class="number">0.07470</span>), <span class="number">0.1533</span>), <span class="number">0.0666</span>)</div><div class="line"></div><div class="line">    <span class="keyword">print</span> t3</div><div class="line">    <span class="comment"># 直接通过左右节点找到对应的叶子对象了</span></div><div class="line">    t4 = t3.right.right.subtree()</div><div class="line">    <span class="keyword">print</span> t4</div><div class="line">    <span class="comment"># t3的左树其实就是叶子对象了</span></div><div class="line">    t5 = t3.left.subtree()</div><div class="line">    <span class="keyword">print</span> t5</div></pre></td></tr></table></figure></p>
<hr>
<h1 id="应用软件中快捷键"><a href="#应用软件中快捷键" class="headerlink" title="应用软件中快捷键"></a>应用软件中快捷键</h1><p><strong>sublime:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">alt+数字 切换打开多个文件</div><div class="line">ctrl+N 新建标签</div><div class="line">alt+<span class="built_in">shift</span>+2 分屏</div><div class="line"><span class="built_in">shift</span>+F11 全屏免打扰模式</div><div class="line">ctrl+H 替换快捷键</div><div class="line">ctrl+G 跳转到第n行</div><div class="line">ctrl+W 关闭当前文件</div><div class="line">ctrl+<span class="built_in">shift</span>+L 在所有行尾插入</div></pre></td></tr></table></figure></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/efficiency/" rel="tag">#efficiency</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/06/16/python中的线程/" rel="next" title="python中的线程">
                <i class="fa fa-chevron-left"></i> python中的线程
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/03/15/部署jupyter使用python与R/" rel="prev" title="部署jupyter使用python与R">
                部署jupyter使用python与R <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/02/26/linux下开发常用资源整理/"
           data-title="linux下开发常用资源整理" data-url="http://yoursite.com/2016/02/26/linux下开发常用资源整理/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://7xjopn.com1.z0.glb.clouddn.com/头像.jpg"
               alt="LCH" />
          <p class="site-author-name" itemprop="name">LCH</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">11</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#python-初级-进阶-调试-框架"><span class="nav-number">1.</span> <span class="nav-text">python(初级,进阶,调试,框架)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#初级"><span class="nav-number">1.1.</span> <span class="nav-text">初级:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#进阶"><span class="nav-number">1.2.</span> <span class="nav-text">进阶:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#调试"><span class="nav-number">1.3.</span> <span class="nav-text">调试:</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#调试方法"><span class="nav-number">1.3.1.</span> <span class="nav-text">调试方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ipython魔法方法"><span class="nav-number">1.3.2.</span> <span class="nav-text">ipython魔法方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#调试环境"><span class="nav-number">1.3.3.</span> <span class="nav-text">调试环境:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#inux-命令-代码环境优化-shell-vim-tmux"><span class="nav-number">2.</span> <span class="nav-text">inux(命令,代码环境优化,shell,vim,tmux)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#linux"><span class="nav-number">2.1.</span> <span class="nav-text">linux:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ubuntu"><span class="nav-number">2.2.</span> <span class="nav-text">Ubuntu:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sublime"><span class="nav-number">2.3.</span> <span class="nav-text">sublime:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tmux"><span class="nav-number">2.4.</span> <span class="nav-text">tmux:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vim"><span class="nav-number">2.5.</span> <span class="nav-text">vim:</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git下常用命令"><span class="nav-number">3.</span> <span class="nav-text">git下常用命令</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#服务相关-nginx-redis-mongodb-mysql-docker"><span class="nav-number">4.</span> <span class="nav-text">服务相关(nginx,redis,mongodb,mysql,docker)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#算法相关-寻路-排序-动态规划-DFS-BFS-Dijkstra"><span class="nav-number">5.</span> <span class="nav-text">算法相关(寻路,排序,动态规划,DFS,BFS,Dijkstra)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#latex-markdown"><span class="nav-number">6.</span> <span class="nav-text">latex,markdown</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#设计模式-部分内容直接从小明明s的blog直接搬过来"><span class="nav-number">7.</span> <span class="nav-text">设计模式(部分内容直接从小明明s的blog直接搬过来)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#应用软件中快捷键"><span class="nav-number">8.</span> <span class="nav-text">应用软件中快捷键</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LCH</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"hilaopo"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("Ct9tcOp1PvP3woRzKRi73ojr-gzGzoHsz", "MxXrwPH9NUo1vNN3nJxoumnr");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
